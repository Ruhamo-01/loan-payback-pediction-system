<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Register | Loan Payback Prediction</title>
<style>
    * {margin:0; padding:0; box-sizing:border-box;}
    body {
        font-family:"Inter","Poppins","Segoe UI",sans-serif;
        background: linear-gradient(135deg,#0f2027,#203a43,#2c5364);
        min-height:100vh; display:flex; align-items:center; justify-content:center; color:#1f2933;
    }
    .container {
        width:100%; max-width:460px; background:#fff; border-radius:18px; padding:45px 40px;
        box-shadow:0 25px 70px rgba(0,0,0,0.35);
    }
    h1{text-align:center; font-size:2.1rem; margin-bottom:10px; color:#0f766e;}
    p.subtitle{text-align:center; font-size:14px; color:#6b7280; margin-bottom:30px;}
    .form-group{margin-bottom:22px;}
    label{display:block; margin-bottom:7px; font-size:14px; font-weight:600; color:#374151;}
    input{width:100%; padding:12px 14px; border-radius:10px; border:1.8px solid #d1d5db; font-size:14px; transition:all 0.25s;}
    input:focus{outline:none; border-color:#0f766e; box-shadow:0 0 0 3px rgba(15,118,110,0.15);}
    button{width:100%; padding:15px; background:linear-gradient(135deg,#0f766e,#115e59); color:#fff;
        border:none; border-radius:12px; font-size:16px; font-weight:700; cursor:pointer; margin-top:10px; transition:all 0.25s;}
    button:hover{transform:translateY(-2px); box-shadow:0 12px 25px rgba(15,118,110,0.35);}
    .footer-text{margin-top:25px; text-align:center; font-size:14px; color:#6b7280;}
    .footer-text a{color:#0f766e; font-weight:600; text-decoration:none;}
    .footer-text a:hover{text-decoration:underline;}
    .error{background:#fef2f2; color:#b91c1c; border-left:4px solid #ef4444; padding:12px; border-radius:8px; margin-bottom:18px; display:none;}
</style>
</head>
<body>

<div class="container">
    <h1>üìù Create Account</h1>
    <p class="subtitle">Register to access the Loan Prediction System</p>

    <div id="errorMsg" class="error"></div>

    <form id="registerForm">
        <div class="form-group">
            <label>Username</label>
            <input type="text" name="username" required placeholder="Choose a username">
        </div>

        <div class="form-group">
            <label>Email Address</label>
            <input type="email" name="email" required placeholder="Enter your email">
        </div>

        <div class="form-group">
            <label>Password</label>
            <input type="password" name="password" required placeholder="Create a password">
        </div>

        <div class="form-group">
            <label>Confirm Password</label>
            <input type="password" name="confirm_password" required placeholder="Confirm password">
        </div>

        <button type="submit">Register</button>
    </form>

    <div class="footer-text">
        Already have an account? <a href="login.html">Login</a>
    </div>
</div>

<script>
document.getElementById('registerForm').addEventListener('submit', async (e) => {
    e.preventDefault();

    const data = Object.fromEntries(new FormData(e.target));
    const errorDiv = document.getElementById('errorMsg');

    try {
        const res = await fetch('/register', {
            method: 'POST',
            headers: {'Content-Type':'application/json'},
            body: JSON.stringify(data)
        });
        const result = await res.json();

        if (result.error) {
            errorDiv.style.display = 'block';
            errorDiv.textContent = result.error;
        } else {
            errorDiv.style.display = 'none';
            alert(result.message); // Optional success message
            // Automatically redirect to login page
            window.location.href = '/login.html';
        }

    } catch (err) {
        errorDiv.style.display = 'block';
        errorDiv.textContent = "An error occurred. Please try again.";
    }
});
</script>

</body>
</html>
